import{H as u,a$ as d,b0 as o}from"./BP5lhVkG.js";var s=u.extend({name:"keyfilter-directive"}),c=d.extend({style:s});function v(t){return k(t)||p(t)||m(t)||b()}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(t,e){if(t){if(typeof t=="string")return y(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}function p(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function k(t){if(Array.isArray(t))return y(t)}function y(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function f(t){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(t)}var h=c.extend("keyfilter",{beforeMount:function(e,r){var n=this.getTarget(e);if(n){if(n.$_pkeyfilterModifier=this.getModifiers(r),f(r.value)){var i,a;n.$_pkeyfilterPattern=((i=r.value)===null||i===void 0?void 0:i.pattern)||r.value,n.$_pkeyfilterValidateOnly=((a=r.value)===null||a===void 0?void 0:a.validateOnly)||!1}this.bindEvents(n),n.setAttribute("data-pd-keyfilter",!0)}},updated:function(e,r){var n=this.getTarget(e);if(n){if(n.$_pkeyfilterModifier=this.getModifiers(r),this.unbindEvents(e,r),f(r.value)){var i,a;n.$_pkeyfilterPattern=((i=r.value)===null||i===void 0?void 0:i.pattern)||r.value,n.$_pkeyfilterValidateOnly=((a=r.value)===null||a===void 0?void 0:a.validateOnly)||!1}this.bindEvents(n)}},unmounted:function(e,r){this.unbindEvents(e,r)},DEFAULT_PATTERNS:{pint:/[\d]/,int:/[\d\-]/,pnum:/[\d\.]/,money:/[\d\.\s,]/,num:/[\d\-\.]/,hex:/[0-9a-f]/i,email:/[a-z0-9_\.\-@]/i,alpha:/[a-z_]/i,alphanum:/[a-z0-9_]/i},methods:{getTarget:function(e){return o(e,"data-pc-name","inputtext")||o(e,"data-pc-name","textarea")?e:null},getModifiers:function(e){return e.modifiers&&Object.keys(e.modifiers).length?Object.keys(e.modifiers)[Object.keys.length-1]:""},getRegex:function(e){return e.$_pkeyfilterPattern?e.$_pkeyfilterPattern:e.$_pkeyfilterModifier?this.DEFAULT_PATTERNS[e.$_pkeyfilterModifier]:/./},bindEvents:function(e){var r=this;e.$_keyfilterKeydownEvent=function(n){return r.onKeydown(n,e)},e.$_keyfilterPasteEvent=function(n){return r.onPaste(n,e)},e.addEventListener("keypress",e.$_keyfilterKeydownEvent),e.addEventListener("paste",e.$_keyfilterPasteEvent)},unbindEvents:function(e){e.removeEventListener("keypress",e.$_keyfilterKeydownEvent),e.removeEventListener("paste",e.$_keyfilterPasteEvent),e.$_keyfilterKeydownEvent=null,e.$_keyfilterPasteEvent=null},onKeydown:function(e,r){if(!(e.ctrlKey||e.altKey||e.metaKey||e.key==="Tab")){var n=this.getRegex(r);if(n!==""){var i="".concat(e.key);r.$_pkeyfilterValidateOnly&&(i="".concat(e.target.value).concat(e.key)),n.test(i)||e.preventDefault()}}},onPaste:function(e,r){var n=this.getRegex(r);if(n!==""){var i=e.clipboardData.getData("text"),a="";v(i).forEach(function(l){if(r.$_pkeyfilterValidateOnly?a+=l:a=l,!n.test(a))return e.preventDefault(),!1})}}}});export{h as K};
